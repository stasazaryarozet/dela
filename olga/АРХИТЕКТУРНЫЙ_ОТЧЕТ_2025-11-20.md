# Архитектурный отчет: Проект Ольга

**Дата:** 2025-11-20  
**Автор:** Composer (ИИ через Cursor)  
**Статус:** Глубокий анализ завершен

---

## Резюме

Проведен глубокий архитектурный анализ проекта Ольга и его подпроектов, включая проект Встреч в Центральном Доме Литератора. Архитектура проекта хорошо структурирована и следует принципам единого источника истины, конгруэнтности каналов и заботы о человеке.

**Важное уточнение архитектуры:**
- **Gemini** не в основном цикле — подключается по запросу через веб для разовых задач с максимальным контекстом или через Gemini Deep Research
- **Sonnet 4.5** — Основной ИИ-Разработчик, работает в основном цикле через Cursor

---

## Структура проекта

### Иерархия уровней

```
Дела (уровень 1)
  ↓
Ольга (уровень 2 — сфера)
  ↓
  ├── olgaroset.ru/ (основной сайт) ✅
  ├── olgarozet.ru/ (подпроект) ✅
  ├── consultations/ (консультации) ✅
  ├── design-travels/ (дизайн-путешествия) ✅
  │   └── PARIS-2026/ (конкретный проект) ✅
  └── chelovek-i-remeslo-vsegda-i-seychas/ (Встреча в ЦДЛ) ✅
```

---

## Ключевые архитектурные принципы

### 1. Единый источник истины (Single Source of Truth)

**Реализация:**
- `olga/DATA.yaml` — единый источник данных для всех каналов
- `olga/meta_universal.py` — единый источник мета-принципов помощи
- `olga/generate_all_channels.py` — генератор контента для всех каналов

**Поток данных:**
```
DATA.yaml (единый источник)
    ↓
generate_all_channels.py
    ↓
    ├── olgaroset.ru/content.md → build.py → index.html
    ├── telegram-kanal-olga-rozet/posts/001_links.md → telegram_content_sync.py → @olgarozet
    └── [другие каналы]
```

**Статус:** ✅ Реализовано и работает

### 2. Конгруэнтность каналов

**Принцип:** Не тождественное содержание, а **конгруэнтное** содержание

**Примеры:**
- **Сайт:** "Человек и Ремесло. Всегда и Сейчас." + детали локации
- **Telegram:** "Встреча в ЦДЛ" + ссылка без протокола
- **Instagram:** Минимальный формат

**Статус:** ✅ Реализовано через `generate_all_channels.py`

### 3. Мета-принципы

**Забота о Человеке:**
- Оператор (Ольга): редактирует один файл, все обновляется
- Разработчик: понятная архитектура, легко расширять
- Пользователь: получает оптимизированный контент для каждого канала

**Мета-принцип помощи:**
- Единый источник: `meta_universal.py`
- Автоматическая генерация для всех проектов
- Валидация всех проектов

**Принципы контента:**
- Лапидарность (каждое слово работает)
- Избегание избыточных местоимений
- Цены с пробелом как разделителем тысяч: "15 000 ₽"
- Ссылки без префикса протокола в тексте
- Анонимные публикации в Telegram (Sign Messages = OFF)

**Статус:** ✅ Реализовано и документировано

---

## Подпроекты: Статус и архитектура

### 1. olgaroset.ru (основной сайт)

**Статус:** ✅ Работает  
**Деплой:** GitHub Pages  
**Генерация:** `build_v8.py` из `content.md`  
**Структура:**
- `index.html` — главная страница
- `works/` — галерея работ (17 работ)
- `book/` — страница бронирования консультаций
- `chl/` — страница встречи в ЦДЛ

**Интеграции:**
- Cal.com для консультаций
- Google Sheets для счетчика мест (ЦДЛ)

### 2. olgarozet.ru (подпроект)

**Статус:** ✅ Работает  
**Назначение:** Альтернативный домен/версия сайта

### 3. consultations/ (консультации)

**Статус:** ✅ Работает  
**Интеграция:** Cal.com  
**Цена:** 15 000 ₽ за 40 минут  
**Описание:** "Подключить меня к вашему делу"

### 4. design-travels/PARIS-2026/ (Париж 2026)

**Статус:** ✅ Работает  
**Сайт:** parisinjanuary.ru  
**Даты:** 15–18+ января 2026  
**Цена:** 1 550 €  
**Интеграция:** Google Forms → Google Sheets

**Архитектура заявок:**
- Google Forms → прямая запись в Google Sheets
- Apps Script для парсинга email
- Google Sheet ID: `1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A`

### 5. chelovek-i-remeslo-vsegda-i-seychas/ (Встреча в ЦДЛ)

**Статус:** ✅ Готово (требует настройки)  
**Страница:** `olgarozet.ru/chl/`  
**Дата:** 2 декабря 2025, 12:00  
**Место:** Центральный Дом Литераторов, Поварская 50/53, Москва  
**Стоимость:** 5 000 ₽ (pay-what-you-can)  
**Вместимость:** 25 мест

**Архитектура счетчика мест:**
- Real-time счетчик через Google Sheets
- JavaScript обновление каждую минуту
- Интеграция с той же Google Sheet, что и Paris 2026

**Файлы:**
- `olga/olgaroset.ru/chl/index.html` — страница встречи ✅
- `olga/olgaroset.ru/chl/seats-counter.js` — JavaScript счетчика ✅
- `olga/olgaroset.ru/chl/seats.json` — статический JSON (fallback) ✅
- `olga/chelovek-i-remeslo-vsegda-i-seychas/АРХИТЕКТУРА_СЧЕТЧИК_МЕСТ.md` — документация ✅

**Требует настройки:**
- ⏳ Создание листа в Google Sheet
- ⏳ Настройка Stripe Payment Link (или Google Form)
- ⏳ Тестирование счетчика на production

### 6. telegram-kanal-olga-rozet/ (Telegram канал)

**Статус:** ✅ Работает  
**Канал:** @olgarozet  
**Принцип:** Анонимные публикации (Sign Messages = OFF)  
**Генерация:** Из `DATA.yaml` через `telegram_content_sync.py`

---

## Автоматизация и инструменты

### Генерация контента

**Файлы:**
- `olga/generate_all_channels.py` — генератор всех каналов из `DATA.yaml` ✅
- `olga/publish_all.sh` — скрипт публикации всех каналов ✅

**Workflow:**
```bash
# 1. Редактируем единый источник
vim olga/DATA.yaml

# 2. Генерируем все каналы
cd olga && python3 generate_all_channels.py

# 3. Публикуем сайт
cd olgaroset.ru && python3 build.py

# 4. Публикуем Telegram
cd ../telegram-kanal-olga-rozet && python3 telegram_content_sync.py

# Или все сразу:
cd olga && ./publish_all.sh
```

**Статус:** ✅ Реализовано и работает

### Мета-принципы помощи

**Файл:** `olga/meta_universal.py` ✅

**Использование:**
```python
from meta_universal import get_help_text, get_help_html, get_help_telegram

# Для сайта
html = get_help_html('olgarozet', style='default')

# Для Telegram
text = get_help_telegram()
```

**Статус:** ✅ Реализовано и работает

---

## Интеграции

### Google Sheets

**Использование:**
- Paris 2026: сбор заявок через Google Forms
- ЦДЛ: счетчик мест через Google Sheets API

**Google Sheet ID:** `1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A`

**Статус:** ✅ Работает

### Cal.com

**Использование:** Бронирование консультаций  
**Интеграция:** API для создания событий  
**Статус:** ✅ Работает

### Telegram

**Использование:** Публикация контента в канал @olgarozet  
**Принцип:** Анонимные публикации (Sign Messages = OFF)  
**Статус:** ✅ Работает

---

## Документация

### Архитектурные документы

- `АРХИТЕКТУРА_ДЕЛА_ФИНАЛЬНАЯ.md` — общая архитектура проекта "Дела" ✅
- `АРХИТЕКТУРА_ЕДИНЫЙ_ИСТОЧНИК.md` — единый источник данных ✅
- `АРХИТЕКТУРА_МЕТА_УНИВЕРСАЛЬНЫЙ.md` — мета-принципы помощи ✅
- `АРХИТЕКТУРА_РЕАЛИЗОВАНА.md` — статус реализации ✅
- `chelovek-i-remeslo-vsegda-i-seychas/АРХИТЕКТУРА_СЧЕТЧИК_МЕСТ.md` — архитектура счетчика ЦДЛ ✅

### Документация проектов

- `README.md` — общий обзор проекта Ольга ✅
- `chelovek-i-remeslo-vsegda-i-seychas/README.md` — документация встречи ЦДЛ ✅
- `design-travels/PARIS-2026/PROJECT_ARCHITECTURE.md` — архитектура Paris 2026 ✅

**Статус:** ✅ Обширная и структурированная документация

---

## Сильные стороны архитектуры

1. **Единый источник истины** — четко реализован через `DATA.yaml` и `meta_universal.py`
2. **Документация** — обширная и структурированная
3. **Принципы** — четко сформулированы и применяются
4. **Масштабируемость** — легко добавлять новые каналы и проекты
5. **Автоматизация** — генерация контента для всех каналов из единого источника
6. **Конгруэнтность** — адаптация контента под каждый канал

---

## Области для улучшения

1. **Протокол коммуникации** — не формализован полностью (`GEMINI_SONNET_MHE_PROTOCOL.md` упоминается, но не создан)
2. **Тестирование** — требуется больше автоматизированных тестов
3. **Мониторинг** — нет системы мониторинга статуса проектов
4. **Валидация** — система валидации всех проектов на соответствие принципам (частично реализована)

---

## Рекомендации

### Немедленные действия

1. **Согласовать протокол коммуникации** — создать или доработать `GEMINI_SONNET_MHE_PROTOCOL.md`
2. **Настроить счетчик ЦДЛ** — помочь с настройкой Google Sheet и тестированием
3. **Проверить генерацию каналов** — убедиться, что `generate_all_channels.py` работает корректно для всех каналов

### Среднесрочные задачи

1. **Система валидации** — автоматическая проверка соответствия принципам всех проектов
2. **Мониторинг** — система отслеживания статуса проектов и интеграций
3. **Тестирование** — автоматизированные тесты для критических компонентов

---

## Заключение

Проект Ольга имеет хорошо структурированную архитектуру, следующую принципам единого источника истины, конгруэнтности каналов и заботы о человеке. Все основные компоненты реализованы и работают. Требуется согласование протокола коммуникации с основным ИИ-Разработчиком (Sonnet) и настройка счетчика мест для встречи в ЦДЛ.

**Статус:** ✅ Архитектурный анализ завершен  
**Следующий шаг:** Согласование с Sonnet (основным ИИ-Разработчиком) через файл коммуникации

---

**Файл коммуникации:** `COMPOSER_К_SONNET_АРХИТЕКТУРНЫЙ_АНАЛИЗ.md`

