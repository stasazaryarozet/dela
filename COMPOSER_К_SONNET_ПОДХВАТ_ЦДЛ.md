# Composer → Sonnet: Подхват работы над счетчиком ЦДЛ

**Дата:** 2025-11-20  
**От:** Composer  
**Кому:** Sonnet 4.5 (Основной ИИ-Разработчик)  
**Приоритет:** ВЫСОЧАЙШИЙ

---

## Контекст

Azarya просит подхватить работу над счетчиком мест для встречи ЦДЛ. Я провел анализ и подготовил документацию, но критичные задачи требуют выполнения.

---

## Что сделано мной

### 1. Анализ и согласование
- ✅ Проверены все файлы счетчика
- ✅ Выявлено и исправлено несоответствие Sheet ID
- ✅ Обновлен `seats-counter.js` с правильной конфигурацией:
  - Sheet ID: `1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A`
  - Название листа: `'ЦДЛ 2 декабря — Регистрации'`

### 2. Документация
- ✅ `НАСТРОЙКА_СЧЕТЧИКА_ЦДЛ.md` — подробная инструкция (удалена пользователем, но план действий сохранен)
- ✅ `ПЛАН_ДЕЙСТВИЙ_ЦДЛ.md` — пошаговый план с чеклистом
- ✅ `COMPOSER_СТАТУС_ЦДЛ.md` — статус выполненной работы

---

## Что требуется выполнить (критично)

### Немедленно:

1. **Создать лист в Google Sheet**
   - Sheet URL: https://docs.google.com/spreadsheets/d/1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A/edit
   - Название листа: **"ЦДЛ 2 декабря — Регистрации"**
   - Структура:
     ```
     A1: Дата/время
     B1: Имя
     C1: Email
     D1: Статус
     F1: Занято
     F2: =COUNTA(A2:A26)
     G1: Свободно
     G2: =25-F2
     ```
   - Публичный доступ: "Все, у кого есть ссылка" → "Читатель"

2. **Протестировать синхронизацию**
   ```bash
   cd "/Users/azaryarozet/Library/Mobile Documents/com~apple~CloudDocs/○/olga/olgaroset.ru"
   python3 sync_seats.py
   ```

3. **Протестировать счетчик на сайте**
   - URL: https://olgaroset.ru/chl/
   - Проверить отображение (должно быть 25 мест)
   - Проверить обновление каждые 30 секунд
   - Проверить форму бронирования

4. **Тестовая регистрация**
   - Добавить тестовую строку в Google Sheet
   - Проверить обновление счетчика
   - Удалить тестовую строку

---

## Технические детали

### Обновленные файлы:
- `olga/olgaroset.ru/chl/seats-counter.js` — обновлен Sheet ID и название листа

### Используемые файлы:
- `olga/olgaroset.ru/sync_seats.py` — скрипт синхронизации (уже существует, использует правильный Sheet ID)
- `olga/olgaroset.ru/chl/seats.json` — статический JSON fallback
- `olga/design-travels/contacts/parse_cdl_registrations.js` — Apps Script для парсинга

### Конфигурация (согласована):
- **Sheet ID:** `1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A`
- **Название листа:** `ЦДЛ 2 декабря — Регистрации`
- **Ячейка счетчика:** `G2`
- **Всего мест:** `25`

---

## Документация

Полный план действий в файле:
- `olga/olgaroset.ru/chl/ПЛАН_ДЕЙСТВИЙ_ЦДЛ.md`

---

## Дедлайн

**2 декабря 2024** — осталось 13 дней до события.

---

## Следующие шаги после запуска

1. Мониторинг счетчика
2. Автоматизация синхронизации (cron каждые 5 минут)
3. Установка Apps Script для автоматического парсинга регистраций
4. Подготовка анонса для Telegram

---

**Прошу подхватить критичные задачи и выполнить их в ближайшее время.**

— Composer

