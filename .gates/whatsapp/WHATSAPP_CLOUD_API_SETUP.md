# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WhatsApp Cloud API

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://developers.facebook.com/docs/whatsapp/  
**–î–∞—Ç–∞:** 18 –Ω–æ—è–±—Ä—è 2025

---

## üìã –û–±–∑–æ—Ä

WhatsApp Business Platform —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö API:

1. **Cloud API** ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
2. **Business Management API** ‚Äî –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ —à–∞–±–ª–æ–Ω–∞–º–∏

---

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. ‚úÖ Meta App —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
2. ‚úÖ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (–¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω)
3. ‚ö†Ô∏è WhatsApp –ø—Ä–æ–¥—É–∫—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ Meta App Dashboard
4. ‚ö†Ô∏è WhatsApp Business Account –Ω–∞—Å—Ç—Ä–æ–µ–Ω
5. ‚ö†Ô∏è –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω

---

## üîß –®–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç WhatsApp

1. –û—Ç–∫—Ä–æ–π—Ç–µ Meta App Dashboard:
   - https://developers.facebook.com/apps/848486860991509/
   - –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–∫–∫–∞—É–Ω—Ç–æ–º –û–ª—å–≥–∏ –†–æ–∑–µ—Ç

2. –í —Ä–∞–∑–¥–µ–ª–µ **"Products"** –Ω–∞–π–¥–∏—Ç–µ **"WhatsApp"**
   - –ï—Å–ª–∏ –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω, –Ω–∞–∂–º–∏—Ç–µ **"Add Product"** ‚Üí **"WhatsApp"**

3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å WhatsApp Business Account

1. –í —Ä–∞–∑–¥–µ–ª–µ **"WhatsApp"** ‚Üí **"API Setup"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ **WhatsApp Business Account**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ **–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –Ω–æ–º–µ—Ä –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π
   - –ù–æ–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω

4. –ó–∞–ø–∏—à–∏—Ç–µ:
   - **WhatsApp Business Account ID** (WABA ID)
   - **Phone Number ID**
   - **Display Phone Number**

---

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç—å Access Token

–î–ª—è Cloud API —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏–∑ —Ç–æ–∫–µ–Ω–æ–≤:

#### –í–∞—Ä–∏–∞–Ω—Ç A: Page Access Token (–ø—Ä–æ—â–µ)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –æ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ–π Facebook Page
- –£–∂–µ –ø–æ–ª—É—á–µ–Ω —á–µ—Ä–µ–∑ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –î–æ—Å—Ç—É–ø–µ–Ω –≤ `.gates/meta/credentials.json`

#### –í–∞—Ä–∏–∞–Ω—Ç B: System User Token (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Meta Business Settings**
   - https://business.facebook.com/settings
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"System Users"**
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ System User
4. –ù–∞–∑–Ω–∞—á—å—Ç–µ –ø—Ä–∞–≤–∞:
   - `whatsapp_business_management`
   - `whatsapp_business_messaging`
5. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ **System User Token**
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ credentials

---

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

1. –í Meta App Dashboard ‚Üí **WhatsApp** ‚Üí **Configuration**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **Webhook URL**
3. –£–∫–∞–∂–∏—Ç–µ **Verify Token**
4. –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è:
   - `messages` ‚Äî –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - `message_status` ‚Äî —Å—Ç–∞—Ç—É—Å—ã –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ API
python3 .gates/whatsapp/setup_whatsapp_cloud_api.py

# –ß—Ç–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
python3 .gates/whatsapp/read_olga_messages.py

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
python3 .gates/whatsapp/send_message.py
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Cloud API:** https://developers.facebook.com/docs/whatsapp/cloud-api
- **Business Management API:** https://developers.facebook.com/docs/whatsapp/business-management-api
- **Phone Numbers:** https://developers.facebook.com/docs/whatsapp/phone-number
- **Webhooks:** https://developers.facebook.com/docs/whatsapp/webhooks
- **Get Started:** https://developers.facebook.com/docs/whatsapp/cloud-api/get-started

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Cloud API –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏/–ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
2. **On-Premises API** —É—Å—Ç–∞—Ä–µ–ª (sunset —Å 23 –æ–∫—Ç—è–±—Ä—è 2025)
3. **Phone Number** —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã
4. **System User Token** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production
5. **Webhook** –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
python3 .gates/whatsapp/access_via_meta_credentials.py
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- ‚úÖ WhatsApp Business Account ID
- ‚úÖ Phone Number ID
- ‚úÖ Access Token

---

## üìù –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Meta OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω (59 –¥–Ω–µ–π)
- ‚úÖ Page Access Tokens –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚ö†Ô∏è WhatsApp –ø—Ä–æ–¥—É–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Dashboard
- ‚ö†Ô∏è WhatsApp Business Account —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è
- ‚ö†Ô∏è Phone Number —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è


