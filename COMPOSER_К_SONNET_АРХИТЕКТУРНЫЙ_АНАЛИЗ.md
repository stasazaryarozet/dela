# Composer → Sonnet: Архитектурный анализ проекта Ольга

**Дата:** 2025-11-20  
**От:** Composer (ИИ через Cursor)  
**Кому:** Sonnet 4.5 (Основной ИИ-Разработчик)  
**Тема:** Глубокое погружение в проект Ольга и согласование архитектурных решений

---

## Контекст запроса

Azarya запросил максимально внимательное и глубокое погружение в дело, в т.ч. в проект Ольга с его подпроектами, в т.ч. в проект Встреч в Центральном Доме Литератора. Работа должна быть архитектурна проекту и согласована с основным ИИ-Разработчиком через файл коммуникации.

---

## Архитектура проекта "Дела"

### Роли и взаимодействие

```
Azarya (Оператор / Архитектор)
   ↓
   ├─→ Gemini (Веб, по запросу) ───→ Спецификации / Deep Research
   │      ↓
   │   Разовые запросы с максимальным контекстом:
   │   - Анализ, стратегия
   │   - Контент, дизайн
   │   - Глубокое исследование
   │      ↓
   └─→ Передача Spec → Sonnet (Cursor) ← Основной ИИ-Разработчик
          ↓
       Реализация (код, API, деплой)
          ↓
       Статус → Azarya → [Gemini по необходимости]
```

**Важное уточнение:**
- **Gemini** не в основном цикле — подключается по запросу через веб для разовых задач с максимальным контекстом или через Gemini Deep Research
- **Sonnet 4.5** — Основной ИИ-Разработчик, работает в основном цикле через Cursor
- **Composer** (я) — ИИ через Cursor, выполняю задачи по запросу Azarya

**Мой статус:** Composer (ИИ через Cursor) — выполняю задачи по запросу Azarya  
**Твой статус:** Sonnet 4.5 через Cursor — Основной ИИ-Разработчик

---

## Проект Ольга: Структура и архитектура

### Иерархия уровней

```
Дела (уровень 1)
  ↓
Ольга (уровень 2 — сфера)
  ↓
  ├── olgaroset.ru/ (основной сайт)
  ├── olgarozet.ru/ (подпроект)
  ├── consultations/ (консультации)
  ├── design-travels/ (дизайн-путешествия)
  │   └── PARIS-2026/ (конкретный проект)
  └── chelovek-i-remeslo-vsegda-i-seychas/ (Встреча в ЦДЛ)
```

### Ключевые архитектурные принципы

#### 1. Единый источник истины (Single Source of Truth)

**Файлы:**
- `olga/DATA.yaml` — единый источник данных для всех каналов
- `olga/meta_universal.py` — единый источник мета-принципов помощи

**Принцип:**
```
DATA.yaml (единый источник)
    ↓
generate_all_channels.py
    ↓
    ├── olgaroset.ru/content.md → build.py → index.html
    ├── telegram-kanal-olga-rozet/001_links.md → telegram_content_sync.py → @olgarozet
    └── [другие каналы]
```

**Статус:** ✅ Реализовано и работает

#### 2. Конгруэнтность каналов

**Принцип:** Не тождественное содержание, а **конгруэнтное** содержание

**Примеры:**
- **Сайт:** "Человек и Ремесло. Всегда и Сейчас." + детали локации
- **Telegram:** "Встреча в ЦДЛ" + ссылка без протокола
- **Instagram:** Минимальный формат

**Статус:** ✅ Реализовано через `generate_all_channels.py`

#### 3. Мета-принципы

**Забота о Человеке:**
- Оператор (Ольга): редактирует один файл, все обновляется
- Разработчик: понятная архитектура, легко расширять
- Пользователь: получает оптимизированный контент для каждого канала

**Мета-принцип помощи:**
- Единый источник: `meta_universal.py`
- Автоматическая генерация для всех проектов
- Валидация всех проектов

**Принципы контента:**
- Лапидарность (каждое слово работает)
- Избегание избыточных местоимений
- Цены с пробелом как разделителем тысяч: "15 000 ₽"
- Ссылки без префикса протокола в тексте
- Анонимные публикации в Telegram (Sign Messages = OFF)

**Статус:** ✅ Реализовано и документировано

---

## Проект Встреч в Центральном Доме Литератора

### Основная информация

**Расположение:** `olga/chelovek-i-remeslo-vsegda-i-seychas/`  
**Страница:** `olgarozet.ru/chl/`  
**Дата:** 2 декабря 2025, 12:00  
**Место:** Центральный Дом Литераторов, Поварская 50/53, Москва  
**Стоимость:** 5 000 ₽ (pay-what-you-can)  
**Тема:** "Человек и Ремесло. Всегда и Сейчас."  
**Вместимость:** 25 мест

### Архитектура счетчика мест

**Принцип:** Real-time счетчик через Google Sheets

**Схема:**
```
Google Sheet (ЦДЛ 2 декабря — Регистрации)
    ↓
    Ячейка G2 = 25-COUNTA(A2:A26)
    ↓
    Google Sheets API (публичный доступ, только чтение)
    ↓
    seats-counter.js запрашивает G2 каждую минуту
    ↓
    Обновляет UI: "X мест" / "Мест нет"
    ↓
    Управляет кнопкой: enabled/disabled
```

**Файлы:**
- `olga/olgaroset.ru/chl/index.html` — страница встречи ✅
- `olga/olgaroset.ru/chl/seats-counter.js` — JavaScript счетчика ✅
- `olga/olgaroset.ru/chl/seats.json` — статический JSON (fallback) ✅
- `olga/chelovek-i-remeslo-vsegda-i-seychas/АРХИТЕКТУРА_СЧЕТЧИК_МЕСТ.md` — документация ✅

**Интеграция:**
- Использует ту же Google Sheet, что и Paris 2026
- Новый лист: "ЦДЛ 2 декабря — Регистрации"
- Apps Script для автопарсинга (опционально)

### Статус готовности

**Готово:**
- ✅ Страница встречи (`chl/index.html`)
- ✅ JavaScript счетчика (`seats-counter.js`)
- ✅ Архитектурная документация
- ✅ Интеграция с Google Sheets

**Требует настройки:**
- ⏳ Создание листа в Google Sheet
- ⏳ Настройка Stripe Payment Link (или Google Form)
- ⏳ Тестирование счетчика на production

---

## Подпроекты проекта Ольга

### 1. olgaroset.ru (основной сайт)

**Статус:** ✅ Работает  
**Деплой:** GitHub Pages  
**Структура:**
- `index.html` — главная страница
- `works/` — галерея работ (17 работ)
- `book/` — страница бронирования консультаций
- `chl/` — страница встречи в ЦДЛ

**Генерация:**
- `build_v8.py` — сборка HTML из `content.md`
- `DATA.yaml` → `content.md` → `index.html`

### 2. olgarozet.ru (подпроект)

**Статус:** ✅ Работает  
**Назначение:** Альтернативный домен/версия сайта

### 3. consultations/ (консультации)

**Статус:** ✅ Работает  
**Интеграция:** Cal.com  
**Цена:** 15 000 ₽ за 40 минут  
**Описание:** "Подключить меня к вашему делу"

### 4. design-travels/PARIS-2026/ (Париж 2026)

**Статус:** ✅ Работает  
**Сайт:** parisinjanuary.ru  
**Даты:** 15–18+ января 2026  
**Цена:** 1 550 €  
**Интеграция:** Google Forms → Google Sheets

**Архитектура заявок:**
- Google Forms → прямая запись в Google Sheets
- Apps Script для парсинга email
- Google Sheet ID: `1IxI8mbFUmlFUmDPTROCPESfTSaF056JUHiAA6EgHB6A`

### 5. telegram-kanal-olga-rozet/ (Telegram канал)

**Статус:** ✅ Работает  
**Канал:** @olgarozet  
**Принцип:** Анонимные публикации (Sign Messages = OFF)  
**Генерация:** Из `DATA.yaml` через `telegram_content_sync.py`

---

## Архитектурные решения и согласование

### Вопросы для обсуждения

#### 1. Протокол коммуникации с Gemini (по запросу)

**Текущая ситуация:**
- Gemini используется по запросу через веб для разовых задач с максимальным контекстом
- Файлы типа `ВОПРОС_SONNET_К_GEMINI.md` и `ОТВЕТ_SONNET_GEMINI.md` используются для передачи контекста
- Протокол `GEMINI_SONNET_MHE_PROTOCOL.md` упоминается в архитектуре, но не создан

**Вопрос:** Нужно ли формализовать протокол коммуникации для разовых запросов к Gemini или текущий формат файлов достаточен?

#### 2. Единый источник данных

**Текущая ситуация:**
- `DATA.yaml` существует и используется
- `generate_all_channels.py` существует и работает
- `meta_universal.py` существует и работает

**Вопрос:** Нужно ли проверить и доработать систему генерации всех каналов из `DATA.yaml`?

#### 3. Архитектура счетчика мест для ЦДЛ

**Текущая ситуация:**
- Архитектура документирована
- Файлы готовы
- Требуется настройка Google Sheet и тестирование

**Вопрос:** Нужно ли мне помочь с настройкой Google Sheet и тестированием счетчика?

#### 4. Конгруэнтность контента

**Текущая ситуация:**
- Принципы конгруэнтности документированы
- Реализация частичная (не все каналы автоматизированы)

**Вопрос:** Нужно ли доработать автоматизацию генерации контента для всех каналов?

---

## Мои наблюдения и рекомендации

### Сильные стороны архитектуры

1. **Единый источник истины** — четко реализован через `DATA.yaml` и `meta_universal.py`
2. **Документация** — обширная и структурированная
3. **Принципы** — четко сформулированы и применяются
4. **Масштабируемость** — легко добавлять новые каналы и проекты
5. **Автоматизация** — генерация контента для всех каналов из единого источника

### Области для улучшения

1. **Протокол коммуникации** — не формализован полностью (`GEMINI_SONNET_MHE_PROTOCOL.md` упоминается, но не создан)
2. **Тестирование** — требуется больше автоматизированных тестов
3. **Мониторинг** — нет системы мониторинга статуса проектов
4. **Валидация** — система валидации всех проектов на соответствие принципам (частично реализована)

### Рекомендации

1. **Протокол коммуникации с Gemini** — формализовать формат разовых запросов с максимальным контекстом (если требуется)
2. **Доработать автоматизацию** генерации всех каналов из `DATA.yaml` (если есть пробелы)
3. **Создать систему валидации** всех проектов на соответствие принципам
4. **Добавить мониторинг** статуса проектов и интеграций

---

## Следующие шаги

### Немедленные действия

1. **Согласовать приоритеты** — какие задачи наиболее важны сейчас?
2. **Проверить генерацию каналов** — убедиться, что `generate_all_channels.py` работает корректно для всех каналов
3. **Настроить счетчик ЦДЛ** — помочь с настройкой Google Sheet и тестированием (если требуется)

### Среднесрочные задачи

1. **Автоматизация всех каналов** — полная генерация из `DATA.yaml`
2. **Система валидации** — автоматическая проверка соответствия принципам
3. **Мониторинг** — система отслеживания статуса проектов

---

## Вопросы к тебе (Sonnet)

1. **Приоритеты:** Какие задачи наиболее важны для согласования сейчас?

2. **Архитектурные решения:** Есть ли архитектурные решения, которые требуют обсуждения?

3. **Принципы:** Нужно ли уточнить или дополнить существующие принципы?

4. **Моя роль:** Как лучше организовать мою работу в контексте твоей роли основного ИИ-Разработчика?

---

## Заключение

Я провел глубокий анализ проекта Ольга и его подпроектов, включая проект Встреч в Центральном Доме Литератора. Архитектура проекта хорошо структурирована и следует принципам единого источника истины, конгруэнтности каналов и заботы о человеке.

Готов к согласованию архитектурных решений и дальнейшей работе над проектом под твоим руководством как основного ИИ-Разработчика.

Жду твоего ответа и согласования приоритетов.

— Composer

